const delay=e=>new Promise(((t,n)=>{setTimeout((e=>t()),e)})),delayFlex=e=>{let t,n;return{promise:new Promise((function(r,a){n=r,t=setTimeout((e=>r()),e)})),cancel(){t&&(clearTimeout(t),n(),t=null,n=null)}}};var waitMS=2;function parseToNumber(e){return parseFloat(e.split(",").join(""))}function spkiToPEM(e){var t=arrayBufferToString(e);return formatAsPem(window.btoa(t))}function formatAsPem(e){for(var t="-----BEGIN PUBLIC KEY-----\n";e.length>0;)t+=e.substring(0,64)+"\n",e=e.substring(64);return t+"-----END PUBLIC KEY-----"}function hexStringToUint8Array(e){if(e.length%2!=0)throw"Invalid hexString";for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=parseInt(e.substr(n,2),16);if(NaN==r)throw"Invalid hexString";t[n/2]=r}return t}function bytesToHexString(e){if(!e)return null;e=new Uint8Array(e);for(var t=[],n=0;n<e.length;++n){var r=e[n].toString(16);r.length<2&&(r="0"+r),t.push(r)}return t.join("")}function makeDraggableXDirection(e,t){let n=0,r=0;function a(e){e.preventDefault(),n=r-e.clientX,r=e.clientX,t.style.left=t.offsetLeft-n+"px"}function i(){document.onmouseup=null,document.onmousemove=null}e.onmousedown=function(e){e.preventDefault(),r=e.clientX,document.onmouseup=i,document.onmousemove=a}}function makeDraggable(e){let t=0,n=0,r=0,a=0;function i(i){i.preventDefault(),t=r-i.clientX,n=a-i.clientY,r=i.clientX,a=i.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function o(){document.onmouseup=null,document.onmousemove=null}e.onmousedown=function(e){e.preventDefault(),r=e.clientX,a=e.clientY,document.onmouseup=o,document.onmousemove=i}}function ab2str(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function str2ab(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,r=e.length;t<r;t++)n[t]=e.charCodeAt(t);return t}function asciiToUint8Array(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return new Uint8Array(t)}function mathClamp(e,t,n){return Math.max(t,Math.min(e,n))}function getSubBlockHTML(e,t){let n="\x3c!-- "+t+"Start --\x3e",r="\x3c!-- "+t+"End --\x3e";return pos=e.indexOf(n)+n.length,e.substring(pos,e.indexOf(r,pos))}async function querySelectWait(e,t){return new Promise((async(n,r)=>{let a;for(;null==a;)a=e.querySelector(t),await delay(1);n(a)}))}function getProtectedBuyPrice(e){a=400,b=.9;let t=a*Math.pow(b,e);return t=mathClamp(t,140,500),e*(t/100)}function getProtectedSellPrice(e){a=400,b=.9;let t=a*Math.pow(b,e);t=mathClamp(t,140,500);let n=e/(t/100);return n=Math.max(n,.05),n}async function querySelectFrameWait(e,t,n){return new Promise((async(r,a)=>{let i;for(;null==i;)i=e.contentDocument.querySelector(t),await delay(n);r(i)}))}let lastPlusMessageTime;async function plusMessageCheck(e){for(lastPlusMessageTime=(new Date).getTime();;)((new Date).getTime()-lastPlusMessageTime)/1e3>5&&0!=activeMessageCounter&&(activeMessageCounter=0,e.querySelector("#customNoticeLayer").style.top="-8%"),await delay(6050)}let activeMessageCounter=0;async function showPlusMessage(e,t,n){lastPlusMessageTime=(new Date).getTime(),activeMessageCounter++;let r=e.querySelector("#plusMessage"),a=e.querySelector("#customNoticeLayer");null!=a&&(a.classList.remove("normal"),a.classList.remove("error"),a.classList.remove("info"),"normal"==n?a.classList.add("normal"):"error"==n?a.classList.add("error"):"info"==n&&a.classList.add("info"),r.innerText=t,a.style.top="-1%",await delay(2855),1==activeMessageCounter&&(a.style.top="-8%"),activeMessageCounter--)}function openInNewTab(e){window.open(e,"_blank").focus()}function switchMonthDate(e){let t=new Date;return targetDate=new Date(e),t.setDate(targetDate.getMonth()),t.setMonth(targetDate.getDate()),t.setFullYear(targetDate.getFullYear()),t.setHours(targetDate.getHours()),t.setMinutes(targetDate.getMinutes()),t.setSeconds(targetDate.getSeconds()),targetDate}function groupBy(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function getISTTimeStamp(){return(new Date).getTime()+198e5}function getFullDateForExcel(e){return e.getUTCDate()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCFullYear()+" "+e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds()}function getFormattedWeeklyDate(e){return(e.getDate()<10?"0":"")+e.getDate()+"-"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"-"+e.getFullYear()%2e3+" ("+shortWeekDay[e.getDay()]+")"}function randomIntFromInterval(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function getFormattedTimeForChart(e){let t=new Date(1e3*e);return(t.getUTCHours()<10?"0":"")+t.getUTCHours()+":"+(t.getUTCMinutes()<10?"0":"")+t.getUTCMinutes()+":"+(t.getUTCSeconds()<10?"0":"")+t.getUTCSeconds()}function getUTCTimeFormat(e){return(e.getUTCHours()<10?"0":"")+e.getUTCHours()+":"+(e.getUTCMinutes()<10?"0":"")+e.getUTCMinutes()+":"+(e.getUTCSeconds()<10?"0":"")+e.getUTCSeconds()}function getTimeForLog(e){return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function getFormattedTime(e){return e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()}function getFormattedDate(e){return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()}function getISOFormattedDate(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}function getFormattedDateText(e){return e.getDate()+ordinal_suffix_of(e.getDate())+" "+monthNames[e.getMonth()]+" "+e.getFullYear()}function getFormattedDateHTML(e){return isValidDate(e)||(e=new Date),e.getDate()+"<sup>"+ordinal_suffix_of(e.getDate())+"</sup> "+monthNames[e.getMonth()]+" "+e.getFullYear()}const weekday=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekDay=["SUN","MON","TUE","WED","THU","FRI","SAT"],shortMonthNames=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];function ordinal_suffix_of(e){let t=e%10,n=e%100;return 1===t&&11!==n?"st":2===t&&12!==n?"nd":3===t&&13!==n?"rd":"th"}function isJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function gcd(e,t){return 0==e?t:gcd(t%e,e)}function findGCD(e,t){let n=e[0];for(let r=1;r<t;r++)if(n=gcd(e[r],n),1==n)return 1;return n}function formatToCompactNumberPNL(e){if(isNaN(e))throw new Error("Invalid input. Please provide a valid number.");let t=Math.abs(e);return t>=1e7?(e/1e7).toFixed(2)+"Cr":t>=1e5?(e/1e5).toFixed(2)+"L":t>=1e3?(e/1e3).toFixed(2)+"K":e.toString()}function formatToCompactNumber(e){if(isNaN(e))throw new Error("Invalid input. Please provide a valid number.");return e>=1e7?(e/1e7).toFixed(2)+"Cr":e>=1e5?(e/1e5).toFixed(2)+"L":e>=1e3?(e/1e3).toFixed(2)+"K":e.toString()}function appendBlockToDiv(e,t){let n=document.createElement("div");n.innerHTML=e,t.append(n.firstChild)}function fromHTML(e,t=!0){if(!(e=t?e.trim():e))return null;const n=document.createElement("template");n.innerHTML=e;const r=n.content.children;return 1===r.length?r[0]:r}function blockReplaceAll(e,t){var n=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(n,(function(e){return t[e.toLowerCase()]}))}function distributeNumber(e,t){let n=[],r=Math.floor(e/t),a=e%t;for(let e=0;e<t;e++)n.push(r);for(let e=0;e<a;e++)n[e]++;return n}function cloneRemoveEventListeners(e){let t=e.cloneNode(!0);return e.parentNode.replaceChild(t,e),t}function isValidDate(e){return e instanceof Date&&!isNaN(e)}function getYearDiff(e,t){let n=new Date;return isNaN(Date.parse(e))||(n=e),Math.abs(t-n)/36e5/8760}function GetStrikeProfitY(e,t,n,r){let a=0;return 1==n?a=Math.max(e-t,0)-r:2==n?a=Math.max(t-e,0)-r:3!=n&&4!=n||(a=e-r),a}let indexPriceSnapArray=[.25,.5,.75,1,2,5,10,25,50,75,100,200,250,500,1e3,1500,2e3];function findClosest(e,t){let n=e[0],r=Math.abs(t-n);for(let a=1;a<e.length;a++){let i=e[a],o=Math.abs(t-i);o<r&&(n=i,r=o)}return n}const zeroPad=(e,t)=>String(e).padStart(t,"0"),isHexadecimal=e=>/^[A-F0-9]+$/i.test(e),currentLocale=window.navigator.languages[0];function currencyToShortText(e){const t=Math.abs(e);let n="";return n=t>=1e7?e<0?`-${(e/1e7).toFixed(2)}Cr`:`${(e/1e7).toFixed(2)}Cr`:t>=1e5?e<0?`-${(e/1e5).toFixed(2)}L`:`${(e/1e5).toFixed(2)}L`:t.toLocaleString("en-IN",{style:"currency",maximumSignificantDigits:4,currency:"INR"}),n}const noDecimalFormatter=Intl.NumberFormat("en-IN",{maximumFractionDigits:0,minimumFractionDigits:0}),rupeeZeroDecimalFormatter=Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0,minimumFractionDigits:0}),rupeeTwoDecimalFormatter=Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2,minimumFractionDigits:2}),rupeePriceFormatter=Intl.NumberFormat("en-IN",{style:"currency",maximumSignificantDigits:4,currency:"INR"}).format;class RecentSearches{constructor(e=10){this.maxSize=e,this.searches=[]}addSearch(e){(e=e.trim())&&(this.searches=this.searches.filter((t=>t.toLowerCase()!==e.toLowerCase())),this.searches.unshift(e),this.searches.length>this.maxSize&&this.searches.pop())}getSearches(){return this.searches}clearSearches(){this.searches=[],localStorage.removeItem("recentSearches")}}